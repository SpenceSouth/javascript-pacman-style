<!doctype html>
<html lang="en">
<head id="headID">
    <meta charset="UTF-8" />
    <title>Oppa Pacman Style "Hey hey hey hey hey"</title>
    <script type="text/javascript" src="phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
	img{
			width: 100px;
			height: 100px;
			}
	table{
				width: 315px;
			}
	div{
		     position: fixed;
			top: 704px;
			left: 195px;
			 
		 }
    </style>
</head>
<body>


<script type="text/javascript">
        var playerID = getQueryVariable("id");
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if(pair[0] == variable) {
                    return pair[1];
                }
            }
            alert("Query Variable " + variable + " not found");
        }
        //alert(playerID);

        var game = new Phaser.Game(704, 704, Phaser.AUTO, '', { preload: preload, create: create, update: update });

        function preload() {

            game.load.image('background', 'assets/blank-background.png');
            game.load.image('box', 'assets/block.png');
            game.load.image('star', 'assets/box.png');
            game.load.image('keith', 'assets/' + playerID + '.png');
            game.load.image('goose0', 'assets/goose0.png');
            game.load.image('goose1', 'assets/goose1.png');
            game.load.image('goose2', 'assets/goose2.png');
            game.load.image('goose3', 'assets/goose1.png');
            game.load.image('turd0', 'assets/neonGreen.png');
            game.load.image('turd1', 'assets/blue.png');
            game.load.image('turd2', 'assets/green.png');

        }

        var player;
        var ghost0;
        var ghost1;
        var ghost2;
        var ghost3;
        var blocks;
        var turds;
        var cursors;
        var speed = 100;
        var gooseSpeed = 90;

        var stars;
        var score = 0;
        var scoreText;
        var playerName;

        function create() {

            //  We're going to be using physics, so enable the Arcade Physics system
            game.physics.startSystem(Phaser.Physics.ARCADE);

            //  A simple backbox for our game
            game.add.sprite(0, 0, 'background');

            //  The blocks group contains the box and the 2 ledges we can jump on
            blocks = game.add.group();
            turds = game.add.group();


            //  We will enable physics for any object that is created in this group
            blocks.enableBody = true;
            turds.enableBody = true;

    //        //  Scale it to fit the width of the game (the original sprite is 400x32 in size)
    //        box.scale.setTo(2, 2);

            // The player and its settings
            player = game.add.sprite(32*11, 32*11, 'keith');
            player.scale.setTo(.75,.75);

            //Add in the ghosts
            ghost0 = game.add.sprite(1*32, 1*32, 'goose0');
            ghost1 = game.add.sprite(20*32, 1*32, 'goose1');
            ghost2 = game.add.sprite(20*32, 20*32, 'goose2');
            ghost3 = game.add.sprite( 1*32, 20*32, 'goose3');
            ghost0.scale.setTo(.4,.4);
            ghost1.scale.setTo(.4,.4);
            ghost2.scale.setTo(.4,.4);
            ghost3.scale.setTo(.4,.4);

            //  We need to enable physics on the player
            game.physics.arcade.enable(player);
            game.physics.arcade.enable(ghost0);
            game.physics.arcade.enable(ghost1);
            game.physics.arcade.enable(ghost2);
            game.physics.arcade.enable(ghost3);
            //  Player physics properties. Give the little guy a slight bounce.
            player.body.collideWorldBounds = true;
            ghost0.body.collideWorldBounds = true;
            ghost1.body.collideWorldBounds = true;
            ghost2.body.collideWorldBounds = true;
            ghost3.body.collideWorldBounds = true;

            //add listener to ghost0, ghost1, ghost2 that when ghost.x%32 ==0 && ghost.y%32 == 0 call ghost function
            //((ghost0.x % 32) == 0 && (ghost0.y % 32) == 0)
            //((ghost1.x % 32) == 0 && (ghost1.y % 32) == 0)
            //((ghost2.x % 32) == 0 && (ghost2.y % 32) == 0)


            //  Our two animations, walking left and right.
            /*player.animations.add('left', [0, 1, 2, 3], 10, true);
            player.animations.add('right', [5, 6, 7, 8], 10, true);*/

            //Create blocks around the boundary of the map
            for(var i = 0; i < 22; i++){

                var box = blocks.create(i*32, 0, 'box');
                box.body.immovable = true;

                var box = blocks.create(i*32, 32*21, 'box');
                box.body.immovable = true;


                for(var j = 0; j < 22; j++){

                    var box = blocks.create(0, j*32, 'box');
                    box.body.immovable = true;

                    var box = blocks.create(32*21, j*32, 'box');
                    box.body.immovable = true;

                }

            }

            //Create all other nodes
            placeBox(1, 10);
            placeBox(1, 11);
            placeBox(2, 2);
            placeBox(2, 4);
            placeBox(2, 5);
            placeBox(2, 7);
            placeBox(2, 8);
            placeBox(2, 13);
            placeBox(2, 14);
            placeBox(2, 16);
            placeBox(2, 17);
            placeBox(2, 19);
            placeBox(3, 2);
            placeBox(3, 4);
            placeBox(3, 5);
            placeBox(3, 7);
            placeBox(3, 8);
            placeBox(3, 10);
            placeBox(3, 11);
            placeBox(3, 13);
            placeBox(3, 14);
            placeBox(3, 16);
            placeBox(3, 17);
            placeBox(3, 19);
            placeBox(4, 2);
            placeBox(4, 10);
            placeBox(4, 11);
            placeBox(4, 19);
            placeBox(5, 2);
            placeBox(5, 4);
            placeBox(5, 6);
            placeBox(5, 8);
            placeBox(5, 10);
            placeBox(5, 11);
            placeBox(5, 13);
            placeBox(5, 15);
            placeBox(5, 17);
            placeBox(5, 19);
            placeBox(6, 2);
            placeBox(6, 4);
            placeBox(6, 6);
            placeBox(6, 15);
            placeBox(6, 17);
            placeBox(6, 19);
            placeBox(7, 2);
            placeBox(7, 4);
            placeBox(7, 6);
            placeBox(7, 8);
            placeBox(7, 9);
            placeBox(7, 10);
            placeBox(7, 11);
            placeBox(7, 12);
            placeBox(7, 13);
            placeBox(7, 15);
            placeBox(7, 17);
            placeBox(7, 19);
            placeBox(8, 6);
            placeBox(8, 15);
            placeBox(9, 2);
            placeBox(9, 3);
            placeBox(9, 4);
            placeBox(9, 6);
            placeBox(9, 8);
            placeBox(9, 13);
            placeBox(9, 15);
            placeBox(9, 17);
            placeBox(9, 18);
            placeBox(9, 19);
            placeBox(10, 8);
            placeBox(10, 13);
            placeBox(11, 1);
            placeBox(11, 2);
            placeBox(11, 4);
            placeBox(11, 5);
            placeBox(11, 6);
            placeBox(11, 8);
            placeBox(11, 13);
            placeBox(11, 15);
            placeBox(11, 16);
            placeBox(11, 17);
            placeBox(11, 19);
            placeBox(11, 20);
            placeBox(12, 8);
            placeBox(12, 13);
            placeBox(13, 2);
            placeBox(13, 3);
            placeBox(13, 4);
            placeBox(13, 5);
            placeBox(13, 6);
            placeBox(13, 15);
            placeBox(13, 16);
            placeBox(13, 17);
            placeBox(13, 18);
            placeBox(13, 19);
            placeBox(14, 8);
            placeBox(14, 10);
            placeBox(14, 11);
            placeBox(14, 13);
            placeBox(15, 2);
            placeBox(15, 4);
            placeBox(15, 5);
            placeBox(15, 6);
            placeBox(15, 8);
            placeBox(15, 13);
            placeBox(15, 15);
            placeBox(15, 16);
            placeBox(15, 17);
            placeBox(15, 19);
            placeBox(16, 2);
            placeBox(16, 8);
            placeBox(16, 10);
            placeBox(16, 11);
            placeBox(16, 13);
            placeBox(16, 19);
            placeBox(17, 4);
            placeBox(17, 5);
            placeBox(17, 6);
            placeBox(17, 8);
            placeBox(17, 10);
            placeBox(17, 11);
            placeBox(17, 13);
            placeBox(17, 15);
            placeBox(17, 16);
            placeBox(17, 17);
            placeBox(18, 2);
            placeBox(18, 4);
            placeBox(18, 5);
            placeBox(18, 6);
            placeBox(18, 10);
            placeBox(18, 11);
            placeBox(18, 15);
            placeBox(18, 16);
            placeBox(18, 17);
            placeBox(18, 19);
            placeBox(19, 2);
            placeBox(19, 4);
            placeBox(19, 5);
            placeBox(19, 6);
            placeBox(19, 8);
            placeBox(19, 10);
            placeBox(19, 11);
            placeBox(19, 13);
            placeBox(19, 15);
            placeBox(19, 16);
            placeBox(19, 17);
            placeBox(19, 19);
            placeBox(20, 8);
            placeBox(20, 13);




            //  The score
            scoreText = game.add.text(16, 16, 'score: 0', { fontSize: '32px', fill: '#000' });

            //  Our controls.
            cursors = game.input.keyboard.createCursorKeys();


            var dodo = turds.create(9*32, 2*32, 'turd0');
            dodo.body.immovable = true;

        }

        function update() {

            //  Collide the player and the stars with the blocks
            game.physics.arcade.collide(player, blocks);
            game.physics.arcade.collide(player, ghost0, gameOver, null, this);
            game.physics.arcade.collide(player, ghost1, gameOver, null, this);
            game.physics.arcade.collide(player, ghost2, gameOver, null, this);
            game.physics.arcade.collide(player, ghost3, gameOver, null, this);
            game.physics.arcade.overlap(player, turds, steppedInIt, null, this);
            //game.physics.arcade.collide(ghost0, blocks);
            //game.physics.arcade.collide(ghost1, blocks);
            //game.physics.arcade.collide(ghost2, blocks);

            score += 1;
            scoreText.text = 'Score: ' + score;

            if (cursors.left.isDown)
            {
                //  Move to the left
                moveLeft();

    //            player.animations.play('left');
            }
            else if (cursors.right.isDown)
            {
                //  Move to the right
                moveRight();

    //            player.animations.play('right');
            }
            else if (cursors.up.isDown)
            {
                //  Move to the up
                moveUp();

    //            player.animations.play('right');
            }
            else if (cursors.down.isDown)
            {
                //  Move to the down
                moveDown();

    //            player.animations.play('right');
            }
            else
            {
                //  Stand still
                player.animations.stop();

                player.frame = 4;
            }


            ghost0Func(player.x, player.y);
            ghost1Func(player.x, player.y);
            ghost2Func(player.x, player.y);
            ghost3Func(player.x, player.y);
            turd();

            //Reset the speed every 500 ticks
            if(score % 500 == 0){
                speed = 100;
            }

        }

        function moveRight(){
            //  Move to the right
            player.body.velocity.y = 0;
            player.body.velocity.x = speed;

        }

        function moveLeft(){
        //  Move to the left
            player.body.velocity.y = 0;
            player.body.velocity.x = -speed;
        }

        function moveUp(){
            //  Move to the up
            player.body.velocity.x = 0;
            player.body.velocity.y = -speed;

        }

        function moveDown(){
            //  Move to the down
            player.body.velocity.x = 0;
            player.body.velocity.y = speed;

        }

        function placeBox(x, y){
            var box = blocks.create(y*32, x*32, 'box');
            box.body.immovable = true;
        }

        //Send to PHP here
        function gameOver(){
            game.destroy();
            playerName = prompt("Enter Your Name if You Think You Are The Best");
            while(playerName == null) {
                playerName = prompt("Enter Your Name if You Think You Are The Best");
            }
            window.location.href = 'GameOver.php?score=' + score + '&playerName=' + playerName;
        }

            //alert(playerX, " , " + playerY);


            var loop = 0;
            var ghost0NextX = -1;
            var ghost0NextY = -1;
            //TODO: Keith- Implement your search algorithms here.
            function ghost0Func(playerX, playerY) {

                var myY = Math.floor((ghost0.x+16) / 32);
                var myX = Math.floor((ghost0.y+16) / 32);
                var targetY = Math.floor(playerX / 32);
                var targetX = Math.floor(playerY / 32);
                var move = GBF(myX, myY, targetX, targetY);


                //if (loop % 100 == 0)
                //    alert(move + " (" + myX + "," + myY + ")  (" + ghost0.x + "," + ghost0.y + ")" );
                //loop++;


                if (move == "up") {
                    if (myX == ghost0NextX && myY == ghost0NextY) {
                        ghost0.body.velocity.x = 0;
                        ghost0.body.velocity.y = 0;
                        ghost0NextX = myX - 1;
                        ghost0NextY = myY;
                        ghost0.x = myY*32;
                        ghost0.y = myX*32;

                    }
                    else {
                        ghost0.body.velocity.x = 0;
                        ghost0.body.velocity.y = -50;
                    }
                }
                else if (move == "down") {
                    if (myX == ghost0NextX && myY == ghost0NextY) {
                        ghost0.body.velocity.x = 0;
                        ghost0.body.velocity.y = 0;
                        ghost0NextX = myX + 1;
                        ghost0NextY = myY;
                        ghost0.x = myY*32;
                        ghost0.y = myX*32;
                    }
                    else {
                        
                        ghost0.body.velocity.x = 0;
                        ghost0.body.velocity.y = 50;
                    }
                }
                else if (move == "right") {
                    if (myX == ghost0NextX && myY == ghost0NextY) {
                        ghost0.body.velocity.x = 0;
                        ghost0.body.velocity.y = 0;
                        ghost0NextX = myX;
                        ghost0NextY = myY + 1;
                        ghost0.x = myY*32;
                        ghost0.y = myX*32;
                    }
                    else {
                        
                        ghost0.body.velocity.x = 50;
                        ghost0.body.velocity.y = 0;
                    }
                }
                else if (move == "left") {
                    if (myX == ghost0NextX && myY == ghost0NextY) {
                        ghost0.body.velocity.x = 0;
                        ghost0.body.velocity.y = 0;
                        ghost0NextX = myX;
                        ghost0NextY = myY - 1;
                        ghost0.x = myY*32;
                        ghost0.y = myX*32;
                    }
                    else {
                        
                        ghost0.body.velocity.x = -50;
                        ghost0.body.velocity.y = 0;
                    }
                }
                else {

                    ghost0.body.velocity.x = 0;
                    ghost0.body.velocity.y = 0;
                }
            }

            var ghost1previousDirection = "up";
            var ghost1NextX = -1;
            var ghost1NextY = -1;

            function ghost1Func(playerX, playerY) {
                var myY = Math.floor((ghost1.x+16) / 32);
                var myX = Math.floor((ghost1.y+16) / 32);
                //var move = random(myX, myY, targetX, targetY);
                
                if(nextCell(ghost1previousDirection, myX, myY)){

                }
                else {
                    ghost1previousDirection = random(ghost1previousDirection, myX, myY);

                }


                if (ghost1previousDirection == "up") {
                    if (myX == ghost1NextX && myY == ghost1NextY) {
                        ghost1.body.velocity.x = 0;
                        ghost1.body.velocity.y = 0;
                        ghost1NextX = myX - 1;
                        ghost1NextY = myY;
                        ghost1.x = myY * 32;
                        ghost1.y = myX * 32;

                    }
                    else {
                        ghost1.body.velocity.x = 0;
                        ghost1.body.velocity.y = -80;
                    }
                }
                else if (ghost1previousDirection == "down") {
                    if (myX == ghost1NextX && myY == ghost1NextY) {
                        ghost1.body.velocity.x = 0;
                        ghost1.body.velocity.y = 0;
                        ghost1NextX = myX + 1;
                        ghost1NextY = myY;
                        ghost1.x = myY * 32;
                        ghost1.y = myX * 32;
                    }
                    else {

                        ghost1.body.velocity.x = 0;
                        ghost1.body.velocity.y = 80;
                    }
                }
                else if (ghost1previousDirection == "right") {
                    if (myX == ghost1NextX && myY == ghost1NextY) {
                        ghost1.body.velocity.x = 0;
                        ghost1.body.velocity.y = 0;
                        ghost1NextX = myX;
                        ghost1NextY = myY + 1;
                        ghost1.x = myY * 32;
                        ghost1.y = myX * 32;
                    }
                    else {

                        ghost1.body.velocity.x = 80;
                        ghost1.body.velocity.y = 0;
                    }
                }
                else if (ghost1previousDirection == "left") {
                    if (myX == ghost1NextX && myY == ghost1NextY) {
                        ghost1.body.velocity.x = 0;
                        ghost1.body.velocity.y = 0;
                        ghost1NextX = myX;
                        ghost1NextY = myY - 1;
                        ghost1.x = myY * 32;
                        ghost1.y = myX * 32;
                    }
                    else {

                        ghost1.body.velocity.x = -80;
                        ghost1.body.velocity.y = 0;
                    }
                }
                else {

                    ghost1.body.velocity.x = 0;
                    ghost1.body.velocity.y = 0;
                }

            }

            var ghost2NextX = -1;
            var ghost2NextY = -1;
            //TODO: Keith- Implement your search algorithms here.
            function ghost2Func(playerX, playerY) {

                var myY = Math.floor((ghost2.x + 16) / 32);
                var myX = Math.floor((ghost2.y + 16) / 32);
                var targetY = Math.floor(playerX / 32);
                var targetX = Math.floor(playerY / 32);
                var move = GBFLR(myX, myY, targetX, targetY);


                //if (loop % 100 == 0)
                //    alert(move + " (" + myX + "," + myY + ")  (" + ghost0.x + "," + ghost0.y + ")" );
                //loop++;


                if (move == "up") {
                    if (myX == ghost2NextX && myY == ghost2NextY) {
                        ghost2.body.velocity.x = 0;
                        ghost2.body.velocity.y = 0;
                        ghost2NextX = myX - 1;
                        ghost2NextY = myY;
                        ghost2.x = myY * 32;
                        ghost2.y = myX * 32;

                    }
                    else {
                        ghost2.body.velocity.x = 0;
                        ghost2.body.velocity.y = -80;
                    }
                }
                else if (move == "down") {
                    if (myX == ghost2NextX && myY == ghost2NextY) {
                        ghost2.body.velocity.x = 0;
                        ghost2.body.velocity.y = 0;
                        ghost2NextX = myX + 1;
                        ghost2NextY = myY;
                        ghost2.x = myY * 32;
                        ghost2.y = myX * 32;
                    }
                    else {

                        ghost2.body.velocity.x = 0;
                        ghost2.body.velocity.y = 80;
                    }
                }
                else if (move == "right") {
                    if (myX == ghost2NextX && myY == ghost2NextY) {
                        ghost2.body.velocity.x = 0;
                        ghost2.body.velocity.y = 0;
                        ghost2NextX = myX;
                        ghost2NextY = myY + 1;
                        ghost2.x = myY * 32;
                        ghost2.y = myX * 32;
                    }
                    else {

                        ghost2.body.velocity.x = 80;
                        ghost2.body.velocity.y = 0;
                    }
                }
                else if (move == "left") {
                    if (myX == ghost2NextX && myY == ghost2NextY) {
                        ghost2.body.velocity.x = 0;
                        ghost2.body.velocity.y = 0;
                        ghost2NextX = myX;
                        ghost2NextY = myY - 1;
                        ghost2.x = myY * 32;
                        ghost2.y = myX * 32;
                    }
                    else {

                        ghost2.body.velocity.x = -80;
                        ghost2.body.velocity.y = 0;
                    }
                }
                else {

                    ghost2.body.velocity.x = 0;
                    ghost2.body.velocity.y = 0;
                }
            }

            var ghost3previousDirection = "up";
            var ghost3NextX = -1;
            var ghost3NextY = -1;

            function ghost3Func(playerX, playerY) {
                var myY = Math.floor((ghost3.x + 16) / 32);
                var myX = Math.floor((ghost3.y + 16) / 32);
                //var move = random(myX, myY, targetX, targetY);

                if (nextCell(ghost3previousDirection, myX, myY)) {

                }
                else {
                    ghost3previousDirection = random(ghost3previousDirection, myX, myY);

                }


                if (ghost3previousDirection == "up") {
                    if (myX == ghost3NextX && myY == ghost3NextY) {
                        ghost3.body.velocity.x = 0;
                        ghost3.body.velocity.y = 0;
                        ghost3NextX = myX - 1;
                        ghost3NextY = myY;
                        ghost3.x = myY * 32;
                        ghost3.y = myX * 32;

                    }
                    else {
                        ghost3.body.velocity.x = 0;
                        ghost3.body.velocity.y = -80;
                    }
                }
                else if (ghost3previousDirection == "down") {
                    if (myX == ghost3NextX && myY == ghost3NextY) {
                        ghost3.body.velocity.x = 0;
                        ghost3.body.velocity.y = 0;
                        ghost3NextX = myX + 1;
                        ghost3NextY = myY;
                        ghost3.x = myY * 32;
                        ghost3.y = myX * 32;
                    }
                    else {

                        ghost3.body.velocity.x = 0;
                        ghost3.body.velocity.y = 80;
                    }
                }
                else if (ghost3previousDirection == "right") {
                    if (myX == ghost3NextX && myY == ghost3NextY) {
                        ghost3.body.velocity.x = 0;
                        ghost3.body.velocity.y = 0;
                        ghost3NextX = myX;
                        ghost3NextY = myY + 1;
                        ghost3.x = myY * 32;
                        ghost3.y = myX * 32;
                    }
                    else {

                        ghost3.body.velocity.x = 80;
                        ghost3.body.velocity.y = 0;
                    }
                }
                else if (ghost3previousDirection == "left") {
                    if (myX == ghost3NextX && myY == ghost3NextY) {
                        ghost3.body.velocity.x = 0;
                        ghost3.body.velocity.y = 0;
                        ghost3NextX = myX;
                        ghost3NextY = myY - 1;
                        ghost3.x = myY * 32;
                        ghost3.y = myX * 32;
                    }
                    else {

                        ghost3.body.velocity.x = -80;
                        ghost3.body.velocity.y = 0;
                    }
                }
                else {

                    ghost3.body.velocity.x = 0;
                    ghost3.body.velocity.y = 0;
                }

            }

            

            function nextCell(direction, myX, myY) {   
                if (direction == "up") {
                    if ((myX - 1) >= 0 && map[myX - 1][myY] == true) {
                        return true;
                    }
                    else {
                        return false;
                    }
                }
                else if (direction == "down") {
                    if ((myX + 1) < map.length && map[myX + 1][myY] == true) {
                        return true;
                    }
                    else {
                        return false;
                    }
                }
                else if (direction == "left") {
                    if ((myY - 1) >= 0 && map[myX][myY - 1] == true) {
                        return true;
                    }
                    else {
                        return false;
                    }
                }
                else if (direction == "right") {
                    if ((myY + 1) < map[0].length && map[myX][myY + 1] == true) {
                        return true;
                    }
                    else {
                        return false;
                    }
                }
                else {
                    return false;
                }
            }

            //self implemented boolean array
            //need to create a 2 dimensional array of booleans
            //true you can go to that space
            //false there is an obstacle
            var map = new Array(
                    [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false],//0
                    [false, true,  true,  true,  true,  true,  true,  true,  true,  true,  false, false, true,  true,  true,  true,  true,  true,  true,  true,  true,  false],//1
                    [false, true,  false, true,  false, false, true,  false, false, true,  true,  true,  true,  false, false, true,  false, false, true,  false, true,  false],//2
                    [false, true,  false, true,  false, false, true,  false, false, true,  false, false, true,  false, false, true,  false, false, true,  false, true,  false],//3
                    [false, true,  false, true,  true,  true,  true,  true,  true,  true,  false, false, true,  true,  true,  true,  true,  true,  true,  false, true,  false],//4
                    [false, true,  false, true,  false, true,  false, true,  false, true,  false, false, true,  false, true,  false, true,  false, true,  false, true,  false],//5
                    [false, true,  false, true,  false, true,  false, true,  true,  true,  true,  true,  true,  true,  true,  false, true,  false, true,  false, true,  false],//6
                    [false, true,  false, true,  false, true,  false, true,  false, false, false, false, false, false, true,  false, true,  false, true,  false, true,  false],//7
                    [false, true,  true,  true,  true,  true,  false, true,  true,  true,  true,  true,  true,  true,  true,  false, true,  true,  true,  true,  true,  false],//8
                    [false, true,  false, false, false, true,  false, true,  false, true,  true,  true,  true,  false, true,  false, true,  false, false, false, true,  false],//9
                    [false, true,  true,  true,  true,  true,  true,  true,  false, true,  true,  true,  true,  false, true,  true,  true,  true,  true,  true,  true,  false],//10
                    [false, false, false, true,  false, false, false, true,  false, true,  true,  true,  true,  false, true,  false, false, false, true,  false, false, false],//11
                    [false, true,  true,  true,  true,  true,  true,  true,  false, true,  true,  true,  true,  false, true,  true,  true,  true,  true,  true,  true,  false],//12
                    [false, true,  false, false, false, false, false, true,  true,  true,  true,  true,  true,  true,  true,  false, false, false, false, false, true,  false],//13
                    [false, true,  true,  true,  true,  true,  true,  true,  false, true,  false, false, true,  false, true,  true,  true,  true,  true,  true,  true,  false],//14
                    [false, true,  false, true,  false, false, false, true,  false, true,  true,  true,  true,  false, true,  false, false, false, true,  false, true,  false],//15
                    [false, true,  false, true,  true,  true,  true,  true,  false, true,  false, false, true,  false, true,  true,  true,  true,  true,  false, true,  false],//16
                    [false, true,  true,  true,  false, false, false, true,  false, true,  false, false, true,  false, true,  false, false, false, true,  true,  true,  false],//17
                    [false, true,  false, true,  false, false, false, true,  true,  true,  false, false, true,  true,  true,  false, false, false, true,  false, false, false],//18
                    [false, true,  false, true,  false, false, false, true,  false, true,  false, false, true,  false, true,  false, false, false, true,  false, false, false],//18
                    [false, true,  true,  true,  true,  true,  true,  true,  false, true,  true,  true,  true,  false, true,  true,  true,  true,  true,  true,  true,  false],//20
                    [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false] //21
                );

            //greedy best first search
            //returns "up", "down", "left", "right", "no"
            function GBF(myX, myY, targetX, targetY) {

                var optimalPathDistance = map.length * map[0].length;
                var movementDirection = "No";

                if ((myX - 1) >= 0 && map[myX - 1][myY] == true && Math.sqrt(Math.pow(((myX - 1) - targetX), 2) + Math.pow((myY - targetY), 2)) < optimalPathDistance) {
                    optimalPathDistance = Math.sqrt(Math.pow(((myX - 1) - targetX), 2) + Math.pow((myY - targetY), 2));
                    movementDirection = "up";
                }

                if ((myX + 1) < map.length && map[myX + 1][myY] == true && Math.sqrt(Math.pow(((myX + 1) - targetX), 2) + Math.pow((myY - targetY), 2)) < optimalPathDistance) {
                    optimalPathDistance = Math.sqrt(Math.pow(((myX + 1) - targetX), 2) + Math.pow((myY - targetY), 2));
                    movementDirection = "down";
                }

                if ((myY - 1) >= 0 && map[myX][myY - 1] == true && Math.sqrt(Math.pow((myX - targetX), 2) + Math.pow(((myY - 1) - targetY), 2)) < optimalPathDistance) {
                    optimalPathDistance = Math.sqrt(Math.pow((myX - targetX), 2) + Math.pow(((myY - 1) - targetY), 2));
                    movementDirection = "left";
                }

                if ((myY + 1) < map[0].length && map[myX][myY + 1] == true && Math.sqrt(Math.pow((myX - targetX), 2) + Math.pow(((myY + 1) - targetY), 2)) < optimalPathDistance) {
                    optimalPathDistance = Math.sqrt(Math.pow((myX - targetX), 2) + Math.pow(((myY + 1) - targetY), 2));
                    movementDirection = "right";
                }
                return movementDirection;
            }

            function GBFLR(myX, myY, targetX, targetY) {

                var optimalPathDistance = map.length * map[0].length;
                var movementDirection = "No";

                if ((myY - 1) >= 0 && map[myX][myY - 1] == true && Math.sqrt(Math.pow((myX - targetX), 2) + Math.pow(((myY - 1) - targetY), 2)) < optimalPathDistance) {
                    optimalPathDistance = Math.sqrt(Math.pow((myX - targetX), 2) + Math.pow(((myY - 1) - targetY), 2));
                    movementDirection = "left";
                }

                if ((myY + 1) < map[0].length && map[myX][myY + 1] == true && Math.sqrt(Math.pow((myX - targetX), 2) + Math.pow(((myY + 1) - targetY), 2)) < optimalPathDistance) {
                    optimalPathDistance = Math.sqrt(Math.pow((myX - targetX), 2) + Math.pow(((myY + 1) - targetY), 2));
                    movementDirection = "right";
                }

                if ((myX - 1) >= 0 && map[myX - 1][myY] == true && Math.sqrt(Math.pow(((myX - 1) - targetX), 2) + Math.pow((myY - targetY), 2)) < optimalPathDistance) {
                    optimalPathDistance = Math.sqrt(Math.pow(((myX - 1) - targetX), 2) + Math.pow((myY - targetY), 2));
                    movementDirection = "up";
                }

                if ((myX + 1) < map.length && map[myX + 1][myY] == true && Math.sqrt(Math.pow(((myX + 1) - targetX), 2) + Math.pow((myY - targetY), 2)) < optimalPathDistance) {
                    optimalPathDistance = Math.sqrt(Math.pow(((myX + 1) - targetX), 2) + Math.pow((myY - targetY), 2));
                    movementDirection = "down";
                }

                
                return movementDirection;
            }

            //random movement return
            //returns "up", "down", "left", "right", "no"
            function random(lastDirection, myX, myY) {

                var backwards = "";
                var directions = new Array("up", "down", "left", "right")
                var newDirections = new Array();
                var items = 0;

                if (lastDirection == "up") {
                    backwards = "down";
                }
                else if(lastDirection == "down"){
                    backwards = "up";
                }
                else if (lastDirection == "right") {
                    backwards = "left";
                }
                else if (lastDirection == "left") {
                    backwards = "right";
                }
                

                for (var i = 0; i < 4; i++) {
                    if (directions[i] != backwards && nextCell(directions[i], myX, myY)) {
                        newDirections.push(directions[i]);
                        items++;
                    }
                }

                var random = Math.floor(Math.random() * items);
                //alert(random);
                return newDirections[random];
            }

            //itterative deepening depth first search
            //returns "up", "down", "left", "right", "no"
            function IDS(myX, myY, targetX, targetY) {
                var depth = 0;
                var direction = "no";

                if (myX == targetX && myY == targetY) {
                    return direction;
                }
                else {
                    while (direction == "no") {
                        //alert(depth);
                        if (IDSRecursive(myX, myY - 1, targetX, targetY, depth)) {
                            direction = "up";
                        }

                        if (IDSRecursive(myX, myY + 1, targetX, targetY, depth)) {
                            direction = "down";
                        }

                        if (IDSRecursive(myX - 1, myY, targetX, targetY, depth)) {
                            direction = "left";
                        }

                        if (IDSRecursive(myX + 1, myY, targetX, targetY, depth)) {
                            direction = "right";
                        }
                        depth++;
                        if (depth > (50)) {
                            break;
                        }
                    }
                    return direction;
                }
            }

            //do not call this method IDS will call it for you
            function IDSRecursive(myX, myY, targetX, targetY, depth) {

                if (depth > 0) {
                    if ((myY - 1) >= 0 && map[myX][myY - 1] != false) {

                        if (IDSRecursive(myX, (myY - 1), targetX, targetY, (depth - 1))) {
                            return true;
                        }
                    }

                    if ((myY + 1) < map[0].length && map[myX][myY + 1] != false) {

                        if (IDSRecursive(myX, (myY + 1), targetX, targetY, (depth - 1))) {
                            return true;
                        }
                    }

                    if ((myX - 1) >= 0 && map[myX - 1][myY] != false) {
                        if (IDSRecursive((myX - 1), myY, targetX, targetY, (depth - 1))) {
                            return true;
                        }
                    }

                    if ((myX + 1) < map.length && map[myX + 1][myY] != false) {
                        if (IDSRecursive((myX + 1), myY, targetX, targetY, (depth - 1))) {
                            return true;
                        }
                    }

                    return false;

                }
                else if (depth == 0) {
                    if (myX == targetX && myY == targetY) {
                        return true;
                    }
                    else {
                        return false;
                    }
                }
                else {
                    return false;
                }
            }

            function turd() {

                var random = Math.random() * (100 - 1) + 1;

                if (random < 99.5) {

                }
                else {

                    var choice = Math.random() * (300 - 1) + 1;

                    //Ghost0
                    if (choice < 100) {
                        var dodo = turds.create(ghost0.x, ghost0.y, 'turd0');
                        dodo.body.immovable = true;
                    }
                        //Ghost1
                    else if (choice < 200) {
                        var dodo = turds.create(ghost1.x, ghost1.y, 'turd1');
                        dodo.body.immovable = true;

                    }
                        //Ghost2
                    else {
                        var dodo = turds.create(ghost2.x, ghost2.y, 'turd2');
                        dodo.body.immovable = true;

                    }

                }

            }

            function steppedInIt(player, dodo) {

                dodo.kill();

                speed -= 5;


            }

            function mouseClick() {
                alert("click");
            }

    </script>


    <div>
		<table>
         <tr><td style="text-align: center;"><img src="assets/up-arrow.png"   onclick="moveUp()"/></td></tr>
	    <tr><td><img src="assets/left-arrow.png"   onclick="moveLeft()"/>
	    <img src="assets/down-arrow.png"    onclick="moveDown()"/>       
         <img src="assets/right-arrow.png"   onclick="moveRight()"/></td></tr>
          </table>
    </div>

</body>
</html>